<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link rel="stylesheet" href="/admin/managebooking.css">
</head>
<body>
    <!-- Management Section -->
    <div class="management-container">
      <div class="tabs-container">
        <button class="tab-btn active" data-tab="bookings">Bookings</button>
      </div>

      <!-- Bookings Tab -->
      <div class="tab-content">
        <div class="tab-panel active" id="bookings-panel">
          <div class="top-actions">
            <div class="search-bar">
              <input type="text" placeholder="Search bookings...">
              <button><i class="fas fa-search"></i></button>
            </div>
          </div>

          <div class="table-responsive">
            <table>
              <thead>
                <tr>
                  <th>Booking ID</th>
                  <th>Username</th>
                  <th>Movie</th>
                  <th>Screen</th>
                  <th>Payment Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>#B001</td>
                  <td>john_doe</td>
                  <td>The Last Journey</td>
                  <td>Screen 1</td>
                  <td>Paid</td>
                  <td>
                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                  </td>
                </tr>
                <tr>
                  <td>#B002</td>
                  <td>jane_smith</td>
                  <td>Whispers in the Dark</td>
                  <td>Screen 3</td>
                  <td>Pending</td>
                  <td>
                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                  </td>
                </tr>
                <tr>
                  <td>#B003</td>
                  <td>mike_johnson</td>
                  <td>Love in Paris</td>
                  <td>Screen 2</td>
                  <td>Paid</td>
                  <td>
                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                  </td>
                </tr>
                <tr>
                  <td>#B004</td>
                  <td>sarah_williams</td>
                  <td>Quantum Paradox</td>
                  <td>Screen 4</td>
                  <td>Failed</td>
                  <td>
                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                  </td>
                </tr>
                <tr>
                  <td>#B005</td>
                  <td>robert_brown</td>
                  <td>The Hidden Truth</td>
                  <td>Screen 1</td>
                  <td>Paid</td>
                  <td>
                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="pagination">
            <button>Previous</button>
            <button class="active">1</button>
            <button>2</button>
            <button>3</button>
            <button>Next</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Search functionality
    const searchInput = document.querySelector('.search-bar input');
    const searchButton = document.querySelector('.search-bar button');

    searchButton.addEventListener('click', searchBookings);
    searchInput.addEventListener('keyup', function(event) {
      if (event.key === 'Enter') {
        searchBookings();
      }
    });

    function searchBookings() {
      const searchTerm = searchInput.value.toLowerCase();
      const tableRows = document.querySelectorAll('tbody tr');

      tableRows.forEach(row => {
        const bookingId = row.cells[0].textContent.toLowerCase();
        const username = row.cells[1].textContent.toLowerCase();
        const movie = row.cells[2].textContent.toLowerCase();
        const screen = row.cells[3].textContent.toLowerCase();
        const paymentStatus = row.cells[4].textContent.toLowerCase();

        if (bookingId.includes(searchTerm) ||
            username.includes(searchTerm) ||
            movie.includes(searchTerm) ||
            screen.includes(searchTerm) ||
            paymentStatus.includes(searchTerm)) {
          row.style.display = '';
        } else {
          row.style.display = 'none';
        }
      });
    }

    // Delete functionality
    const deleteBtns = document.querySelectorAll('.delete-btn');
    deleteBtns.forEach(btn => {
      btn.addEventListener('click', function() {
        const row = this.closest('tr');
        const bookingId = row.cells[0].textContent;

        if (confirm(`Are you sure you want to delete booking ${bookingId}?`)) {
          row.remove();
          // In a real application, you would send a request to the server to delete the booking
        }
      });
    });

    // Tab switching (keeping this in case you want to add more tabs later)
    const tabBtns = document.querySelectorAll('.tab-btn');
    tabBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        // Remove active class from all tabs
        tabBtns.forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

        // Add active class to clicked tab
        btn.classList.add('active');
        const tabId = btn.getAttribute('data-tab');
        document.getElementById(`${tabId}-panel`).classList.add('active');
      });
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
</body>
</html>